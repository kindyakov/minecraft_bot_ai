# ๐ค Minecraft Bot

## ๐ ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ

```
minecraft-bot/
โโโ src/
โ โโโ core/ # ะฑะฐะทะพะฒัะต ะฒะตัะธ
โ โ โโโ bot.js # ะบะปะฐัั MinecraftBot
โ โ โโโ config.js # dotenv, ะฟะฐััะธะฝะณ ะบะพะฝัะธะณะพะฒ
โ โ โโโ cmdSate.js # ะฐะบัะธะฒะฝัะต ะบะพะผะฐะฝะดั ะฑะพัะฐ
โ โ โโโ logger.js # winston
โ โ โโโ utils.js # ะพะฑัะธะต ััะธะปะธัั
โ โโโ modules/
โ โ โโโ connection/ # ะะพะดะบะปััะตะฝะธะต/ัะตะบะพะฝะฝะตะบั ะฑะพัะฐ
โ โ โ โโโ index.js
โ โ โโโ command_handler/ # ะพะฑัะฐะฑะพัะบะฐ ะบะพะผะฐะฝะด
โ โ โ โโโ index.js # ัะตะณะธัััะฐัะธั/ะฟะฐััะธะฝะณ
โ โ โ โโโ commands/
โ โ โ โ โโโ follow.js
โ โ โ โ โโโ stop.js
โ โ โ โ โโโ help.js
โ โ โ โ โโโ guard.js
โ โ โ โ โโโ mine.js
โ โ โ โ โโโ build.js
โ โ โ โ โโโ ...
โ โ โโโ controls/ # ะฝะธะทะบะพััะพะฒะฝะตะฒัะต ะดะตะนััะฒะธั
โ โ โ โโโ movement.js # pathfinder: ัะพะดัะฑะฐ, ะฝะฐะฒะธะณะฐัะธั
โ โ โ โโโ interaction.js # ะบะปะธะบ, place, attack
โ โ โ โโโ inventory.js # ัะฐะฑะพัะฐ ั ะธะฝะฒะตะฝัะฐััะผ
โ โ โโโ states/ # FSM ัะพััะพัะฝะธั
โ โ โ โโโ idle.js # ะถะดะฐัั/ะฟะตัะธะพะดะธัะตัะบะธะต AI ัะตัะตะฝะธั
โ โ โ โโโ follow.js # ัะปะตะดะพะฒะฐัั
โ โ โ โโโ guard.js # ะพััะฐะฝะฐ/ะทะฐัะธัะฐัั/ะฒัะถะธะฒะฐะฝะธะต
โ โ โ โโโ farm.js # ัะตัะผะตัััะฒะพ
โ โ โ โโโ mine.js # ะดะพะฑััะฐ ัะตััััะพะฒ
โ โ โ โโโ build.js # ัััะพะธัะตะปัััะฒะพ
โ โ โโโ ai/ # AI ะฐะดะฐะฟัะตั
โ โ โ โโโ index.js # ะฒัะทะพะฒั API + schema validation
โ โ โโโ scheduler/ # ะฟะปะฐะฝะธัะพะฒัะธะบ ะทะฐะดะฐั
โ โ โ โโโ index.js
โ โ โโโ utils/ # ะปะพะบะฐะปัะฝัะต ัะตะปะฟะตัั
โ โ โโโ index.js
โ โโโ tests/ # unit/integration ัะตััั
โ โโโ index.js # ัะพัะบะฐ ะฒัะพะดะฐ
โโโ config/
โ โโโ .env.example
โโโ docs/
โ โโโ README.md
โโโ .eslintrc.js
โโโ .prettierrc.js
โโโ .gitignore
โโโ package.json
โโโ package-lock.json
โโโ nodemon.json
```

## โ๏ธ ะัะฝะพะฒะฝัะต ะทะฐะฒะธัะธะผะพััะธ

- `mineflayer` โ ะพัะฝะพะฒะฝะพะน API ะดะปั Minecraft
- `mineflayer-pathfinder` โ ะฝะฐะฒะธะณะฐัะธั
- `mineflayer-collectblock` โ ัะฑะพั ะฑะปะพะบะพะฒ
- `minecraft-data` โ ะดะพัััะฟ ะบ ะดะฐะฝะฝัะผ ะพ ะผะธัะต
- `@nxg-org/mineflayer-custom-pvp` - ะฟะฒะฟ ัะตะถะธะผ ะฑะพัะฐ
- `mineflayer-armor-manager` - ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะบะธะฟะธัะพะฒะฐัั ะฑะพะปะตะต ะบะฐัะตััะฒะตะฝะฝัั ะฑัะพะฝั
- `dotenv` โ ะบะพะฝัะธะณะธ
- `winston` โ ะปะพะณะธัะพะฒะฐะฝะธะต
- `axios` โ ะฒัะทะพะฒั ะฒะฝะตัะฝะธั API (AI)
- `ajv` โ ะฒะฐะปะธะดะฐัะธั JSON ััะตะผ
- `prettier` โ ััะธะปั ะบะพะดะฐ

## ๐ ะะพะฝัะธะณะธ (`.env.example`)

```
MINECRAFT_HOST=localhost
MINECRAFT_PORT=22222
MINECRAFT_USERNAME=bot
MINECRAFT_VERSION=1.20.1

AI_PROVIDER=openai
AI_MODEL=gpt-4o-mini
AI_API_KEY=sk-...
AI_TIMEOUT_MS=800
AI_MAX_TOKENS=300
```

## ๐ฆ ะะธะทะฝะตะฝะฝัะน ัะธะบะป ะฑะพัะฐ

1. **ะะฐะฟััะบ:**

- ะงัะตะฝะธะต ะบะพะฝัะธะณะพะฒ
- ะกะพะทะดะฐะฝะธะต ัะบะทะตะผะฟะปััะฐ MinecraftBot
- ะะพะดะบะปััะตะฝะธะต ะบ ัะตัะฒะตัั

2. **ะะฝะธัะธะฐะปะธะทะฐัะธั:**

- ะะตะณะธัััะฐัะธั ะพะฑัะฐะฑะพััะธะบะพะฒ ัะพะฑััะธะน
- ะะฐะฟััะบ FSM (ัะพััะพัะฝะธะต IDLE)
- ะะฐะฟััะบ ะฟะปะฐะฝะธัะพะฒัะธะบะฐ ะทะฐะดะฐั

3. **ะะฐะฑะพัะฐ:**

- FSM ะพะฑัะฐะฑะฐััะฒะฐะตั ะบะพะผะฐะฝะดั ะธ ัะพะฑััะธั
- AI ะฟัะธะฝะธะผะฐะตั ะฒััะพะบะพััะพะฒะฝะตะฒัะต ัะตัะตะฝะธั (ะฝะฐะฟัะธะผะตั, ะฒัะฑะพั ะทะฐะดะฐัะธ)
- Scheduler ัะฟัะฐะฒะปัะตั ะฟะฐัะฐะปะปะตะปัะฝัะผะธ ะทะฐะดะฐัะฐะผะธ ั ะฟัะธะพัะธัะตัะฐะผะธ

4. **ะัะบะปััะตะฝะธะต/ัะตะบะพะฝะฝะตะบั:**

- ะัะธ ัะฐะทััะฒะต ัะพะตะดะธะฝะตะฝะธั ะทะฐะฟััะบะฐะตััั ัะตะบะพะฝะฝะตะบั
- ะกะพััะพัะฝะธะต ัะพััะฐะฝัะตััั (ะฟะพ ะฒะพะทะผะพะถะฝะพััะธ)

## ๐ ะกะพะฑััะธะนะฝะฐั ะผะพะดะตะปั

- Mineflayer ัะพะฑััะธั: `spawn`, `death`, `chat`, `health`, `entityHurt`, `blockUpdate`
- ะะฐััะพะผะฝัะต ัะพะฑััะธั:
  - `state:changed` โ ัะผะตะฝะฐ FSM ัะพััะพัะฝะธั
  - `task:completed` โ ะทะฐะดะฐัะฐ ะทะฐะฒะตััะตะฝะฐ
  - `ai:decision` โ ะฝะพะฒะพะต ัะตัะตะฝะธะต AI
    ะะฑัะตะฝะธะต ะผะตะถะดั ะผะพะดัะปัะผะธ โ ัะตัะตะท `EventEmitter`.

## ๐ง **FSM** + **AI** + **Scheduler**

- FSM ัะฟัะฐะฒะปัะตั ะฟะพะฒะตะดะตะฝะธะตะผ (`Idle`, `Follow`, `Guard`, `Farm`, `Mine`, `Build`).
- AI ัะฐะฑะพัะฐะตั ะฒ `IDLE` ะธะปะธ ะฟัะธ ะฟัะธะฝััะธะธ ะฝะพะฒัั ัััะฐัะตะณะธัะตัะบะธั ะทะฐะดะฐั.
- Scheduler ะฒัะฟะพะปะฝัะตั ะทะฐะดะฐัะธ ะฒะฝัััะธ ัะพััะพัะฝะธั (ะฝะฐะฟัะธะผะตั, ะธะดัะธ โ ะบะพะฟะฐัั โ ัะปะพะถะธัั ัะตััััั).

## ๐ ะัะธะพัะธัะตัั:

1. ะะพะผะฐะฝะดั ะธะณัะพะบะฐ (manual override)
2. ะัะฟะพะปะฝัะตะผัะต ะทะฐะดะฐัะธ FSM
3. AI-ัะตัะตะฝะธั

## ะะปััะตะฒัะต ะพัะพะฑะตะฝะฝะพััะธ:

- Dependency Injection ัะตัะตะท ะบะพะฝััััะบัะพัั
- FSM ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฟะพะฒะตะดะตะฝะธะตะผ
- ะะปะฐะฝะธัะพะฒัะธะบ ะทะฐะดะฐั ั ะฟัะธะพัะธัะตัะฐะผะธ
- AI ัะพะปัะบะพ ะดะปั ะฒััะพะบะพััะพะฒะฝะตะฒัั ัะตัะตะฝะธะน
- ะกััะพะณะฐั ะฒะฐะปะธะดะฐัะธั AI ะพัะฒะตัะพะฒ ัะตัะตะท JSON Schema
- Comprehensive ะปะพะณะธัะพะฒะฐะฝะธะต ั correlation ID

## ๐ ะะพะฒะตะดะตะฝัะตัะบะธะต ัะพััะพัะฝะธั

- **IDLE** - ะพะถะธะดะฐะฝะธะต, ะฟะตัะธะพะดะธัะตัะบะธะต AI ัะตัะตะฝะธั
- **FOLLOW** - ัะปะตะดะพะฒะฐะฝะธะต ะทะฐ ะธะณัะพะบะพะผ
- **GUARD** - ะทะฐัะธัะฐ/ะฒัะถะธะฒะฐะฝะธะต
- **FARM** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ัะตัะผะตัััะฒะพ
- **MINE** - ะดะพะฑััะฐ ัะตััััะพะฒ
- **BUILD** - ัััะพะธัะตะปัััะฒะพ ะฟะพ ะฟะปะฐะฝะฐะผ

## ๐ ะะพะณะธัะพะฒะฐะฝะธะต

- ะัะฟะพะปัะทัะตััั `winston`
- ะฃัะพะฒะฝะธ: `info`, `debug`, `error`
- ะะฐะถะดะฐั ะทะฐะดะฐัะฐ ะฟะพะผะตัะฐะตััั correlation ID
- ะะพะดะดะตัะถะบะฐ ะฒัะฒะพะดะฐ ะฒ stdout ะธ ัะฐะนะป (ะพะฟัะธะพะฝะฐะปัะฝะพ ELK/Prometheus)

## โ ะขะตััะธัะพะฒะฐะฝะธะต

- Unit: ััะธะปะธัั ะธ ะบะพะฝััะพะปั
- Integration: ัะตััั ะฟะพะดะบะปััะตะฝะธั ะบ ัะตัะฒะตัั
- E2E: ะฟัะพะฒะตัะบะฐ ะฟะพะปะฝะพะณะพ ัะธะบะปะฐ (ะบะพะผะฐะฝะดะฐ โ FSM โ ะดะตะนััะฒะธะต)
- ะะฝััััะผะตะฝัั: jest ะธะปะธ vitest
- ะัะพะณะพะฝ ัะตััะพะฒ ะฒ CI ะฟัะธ ะบะฐะถะดะพะผ ะฟััะต

## ๐ ะะฐััะธััะตะผะพััั

- ะะพะฒัะต ัะพััะพัะฝะธั FSM ะดะพะฑะฐะฒะปััััั ะพัะดะตะปัะฝัะผ ะผะพะดัะปะตะผ.
- ะะพะผะฐะฝะดั ัะตะณะธัััะธัััััั ะบะฐะบ ะฟะปะฐะณะธะฝั (`command_handler/commands`).
- ะะพะดะดะตัะถะบะฐ ะฒะฝะตัะฝะธั mineflayer-ะฟะปะฐะณะธะฝะพะฒ.

## ๐ ะะตะทะพะฟะฐัะฝะพััั

1. ะะตะปัะน ัะฟะธัะพะบ ัะฐะทัะตัะตะฝะฝัั ะดะตะนััะฒะธะน
2. ะะณัะฐะฝะธัะตะฝะธะต ะฒัะตะผะตะฝะธ ะฒัะฟะพะปะฝะตะฝะธั ะทะฐะดะฐั
3. ะะฐะปะธะดะฐัะธั ะฒัะตั AI ะบะพะผะฐะฝะด ัะตัะตะท JSON Schema
4. Fallback ะบ ะฑะฐะทะพะฒัะผ ะฟัะฐะฒะธะปะฐะผ ะฟัะธ ัะฑะพัั AI
5. ะะณัะฐะฝะธัะตะฝะธั ะฝะฐ ะพะฟะฐัะฝัะต ะดะตะนััะฒะธั (ะปะฐะฒะฐ, ะฒััะพัะฐ, ะฐัะฐะบะฐ ะธะณัะพะบะพะฒ)
6. Rate limiting ะฝะฐ ะบะพะผะฐะฝะดั

## ๐ ะะพะบัะผะตะฝัะฐัะธั ะธ ะทะฐะฟััะบ

### ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ

```bash
npm install
npm run dev
```

### ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

- ะัะต ะฟะตัะตะผะตะฝะฝัะต ะฝะฐัะพะดัััั ะฒ `.env` (ะฟัะธะผะตั: `config/.env.example`).

**ะัะธะผะตัั ะบะพะผะฐะฝะด**

- `:follow <player>` โ ัะปะตะดะพะฒะฐัั ะทะฐ ะธะณัะพะบะพะผ
- `stop` โ ะพััะฐะฝะพะฒะธัั ะดะตะนััะฒะธั
- `farm` โ ะฝะฐัะฐัั ัะตัะผะตัััะฒะพ

## ๐ฃ Roadmap

1. ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ ะธ ัะฟัะฐะฒะปะตะฝะธั
2. ะะฝัะตะณัะฐัะธั ั Discord ะดะปั ัะดะฐะปัะฝะฝะพะณะพ ัะฟัะฐะฒะปะตะฝะธั
3. ะะพะดะดะตัะถะบะฐ ะฝะตัะบะพะปัะบะธั ะฑะพัะพะฒ ั ัะฐัะฟัะตะดะตะปะตะฝะธะตะผ ัะพะปะตะน
